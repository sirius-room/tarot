<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚ãªãŸã«ãƒ”ãƒƒã‚¿ãƒªã®è¬›åº§ã¯ï¼Ÿ | ç”Ÿå‘½ã®æ¨¹ã‚¿ãƒ­ãƒƒãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;700&display=swap');
        
        body {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-option {
            transition: all 0.3s ease;
        }

        .btn-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(106, 17, 203, 0.2);
            border-color: #9333ea;
        }
        
        .btn-option:active {
            transform: translateY(0);
        }

        .hidden {
            display: none;
        }

        /* è³ªå•ç•ªå·ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .q-badge {
            background: #f3e8ff;
            color: #9333ea;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div class="glass-card w-full max-w-lg rounded-3xl overflow-hidden relative min-h-[600px] flex flex-col">
        
        <!-- Progress Bar -->
        <div class="w-full h-2 bg-gray-100">
            <div id="progress-bar" class="h-full bg-purple-600 transition-all duration-500 w-0"></div>
        </div>

        <!-- Content Area -->
        <div class="p-6 md:p-8 flex-1 flex flex-col justify-center items-center text-center relative z-10 w-full">
            
            <!-- START SCREEN -->
            <div id="step-start" class="fade-in w-full">
                <div class="mb-8">
                    <span class="inline-block p-5 rounded-full bg-purple-100 text-purple-600 mb-6">
                        <i class="fas fa-magic text-4xl"></i>
                    </span>
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">ã‚ãªãŸã«æœ€é©ãª<br>å­¦ã³ã®ã‚³ãƒ¼ã‚¹ã¯ï¼Ÿ</h1>
                    <p class="text-gray-600 leading-relaxed">
                        ã„ãã¤ã‹ã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€<br>
                        ä»Šã®ã‚ãªãŸã®å¸Œæœ›ã‚„ç›®çš„ã«<br>
                        ãƒ”ãƒƒã‚¿ãƒªãªè¬›åº§ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚
                    </p>
                </div>
                <button onclick="startDiagnosis()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 px-10 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 w-full sm:w-auto text-lg">
                    è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆ
                </button>
            </div>

            <!-- Q1: ç›®çš„ (Routeåˆ†å²) -->
            <div id="q-1" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 1 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">ä»Šå›ã®å­¦ã³ã®ç›®çš„ã¯ï¼Ÿ</h2>
                
                <div class="space-y-4">
                    <button onclick="nextStep('q-2-pro')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                            <i class="fas fa-crown text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-800 text-lg">ãƒ—ãƒ­ã‚’ç›®æŒ‡ã™ãƒ»æ¥µã‚ãŸã„</div>
                            <div class="text-sm text-gray-500">æœ¬æ ¼çš„ã«å­¦ã³ã€ä½¿ã„ã“ãªã›ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„</div>
                        </div>
                    </button>
                    
                    <button onclick="nextStep('q-2-basic')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                            <i class="fas fa-seedling text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-800 text-lg">åŸºç¤ã‚’çŸ¥ã‚ŠãŸã„ãƒ»å§‹ã‚ãŸã„</div>
                            <div class="text-sm text-gray-500">ã¾ãšã¯å…¨ä½“åƒã‚„åŸºæœ¬ã‚’ã—ã£ã‹ã‚Šå­¦ã³ãŸã„</div>
                        </div>
                    </button>

                    <button onclick="nextStep('q-2-trial')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                            <i class="fas fa-coffee text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-800 text-lg">æ°—è»½ã«è¦—ããŸã„ãƒ»ç‹¬å­¦æ´¾</div>
                            <div class="text-sm text-gray-500">ãŠè©¦ã—å‚åŠ ã‚„ã€ãƒã‚¤ãƒšãƒ¼ã‚¹ã«å­¦ã³ãŸã„</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Q2-Pro: æœ¬æ ¼æ´¾å‘ã‘ã®è³ªå• -->
            <div id="q-2-pro" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 2 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">å¸Œæœ›ã™ã‚‹ã‚µãƒãƒ¼ãƒˆä½“åˆ¶ã¯ï¼Ÿ</h2>
                <div class="space-y-4">
                    <button onclick="nextStep('q-3-master')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">æ‰‹å–ã‚Šè¶³å–ã‚Šä¼´èµ°ã—ã¦ã»ã—ã„<br><span class="text-sm text-gray-500 font-normal">ï¼ˆè¬›å¸«ä¼´èµ°ãƒ»ãƒ•ãƒ«ã‚µãƒãƒ¼ãƒˆï¼‰</span></div>
                    </button>
                    <button onclick="nextStep('q-3-labo')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">åŸºæœ¬ã¯ç‹¬å­¦ã€è³ªå•ã ã‘ã—ãŸã„<br><span class="text-sm text-gray-500 font-normal">ï¼ˆè‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§è³ªå•æ·»å‰ŠOKï¼‰</span></div>
                    </button>
                </div>
                <button onclick="backTo('q-1')" class="mt-8 text-gray-400 text-sm hover:text-gray-600 block text-center w-full">â† æˆ»ã‚‹</button>
            </div>

            <!-- Q2-Basic: åŸºç¤æ´¾å‘ã‘ã®è³ªå• -->
            <div id="q-2-basic" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 2 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">å¾—æ„ãªå­¦ã³æ–¹ã¯ã©ã£ã¡ï¼Ÿ</h2>
                <div class="space-y-4">
                    <button onclick="nextStep('q-3-intro')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">å…ˆç”Ÿã‹ã‚‰ç›´æ¥æ•™ã‚ã‚ŠãŸã„<br><span class="text-sm text-gray-500 font-normal">ï¼ˆãƒ©ã‚¤ãƒ–è¬›ç¾©ãƒ»å¯¾è©±å½¢å¼ï¼‰</span></div>
                    </button>
                    <button onclick="nextStep('q-3-book')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">è§£èª¬æ›¸ã‚’èª­ã‚“ã§ç†è§£ã—ãŸã„<br><span class="text-sm text-gray-500 font-normal">ï¼ˆãƒ†ã‚­ã‚¹ãƒˆæ´¾ãƒ»å®Œå…¨ç‹¬å­¦ï¼‰</span></div>
                    </button>
                </div>
                <button onclick="backTo('q-1')" class="mt-8 text-gray-400 text-sm hover:text-gray-600 block text-center w-full">â† æˆ»ã‚‹</button>
            </div>

            <!-- Q2-Trial: ãŠè©¦ã—æ´¾å‘ã‘ã®è³ªå• -->
            <div id="q-2-trial" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 2 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">èˆˆå‘³ãŒã‚ã‚‹ã®ã¯ï¼Ÿ</h2>
                <div class="space-y-4">
                    <button onclick="nextStep('q-3-trial')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">å®Ÿéš›ã®å‹‰å¼·ä¼šã«å‚åŠ ã—ã¦ã¿ãŸã„<br><span class="text-sm text-gray-500 font-normal">ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®é›°å›²æ°—é‡è¦–ï¼‰</span></div>
                    </button>
                    <button onclick="nextStep('q-3-archive')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">éå»ã®å‹•ç”»ã‚’è‰²ã€…è¦‹ãŸã„<br><span class="text-sm text-gray-500 font-normal">ï¼ˆå‹•ç”»è¦–è´ã®ã¿ãƒ»é †ä¸åŒOKï¼‰</span></div>
                    </button>
                </div>
                <button onclick="backTo('q-1')" class="mt-8 text-gray-400 text-sm hover:text-gray-600 block text-center w-full">â† æˆ»ã‚‹</button>
            </div>

            <!-- Q3: ç¢ºèª (å…±é€šã‚¯ãƒƒã‚·ãƒ§ãƒ³ãƒšãƒ¼ã‚¸) -->
            <div id="q-confirmation" class="hidden w-full text-center">
                <span class="q-badge">QUESTION 3 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-8">æœ€å¾Œã«ç¢ºèªã§ã™ï¼<br>ã“ã®æ¡ä»¶ã§æ¢ã—ã¾ã™ã‹ï¼Ÿ</h2>
                
                <div class="bg-purple-50 p-6 rounded-xl mb-8">
                    <p id="confirm-text" class="text-lg text-purple-800 font-bold mb-2">æ¡ä»¶ãƒ†ã‚­ã‚¹ãƒˆ</p>
                    <p class="text-sm text-gray-600">ã«åˆã†ã‚³ãƒ¼ã‚¹ã‚’æ¤œç´¢ã—ã¾ã™</p>
                </div>

                <button onclick="showResult()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 px-10 rounded-full shadow-lg hover:shadow-xl transition-all w-full">
                    è¨ºæ–­çµæœã‚’è¦‹ã‚‹
                </button>
                <button onclick="backToPrevious()" class="mt-6 text-gray-400 text-sm hover:text-gray-600">â† å¤‰æ›´ã™ã‚‹</button>
            </div>


            <!-- LOADING SCREEN -->
            <div id="step-loading" class="hidden w-full text-center">
                <div class="mb-4">
                    <i class="fas fa-circle-notch fa-spin text-5xl text-purple-600"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-800">æœ€é©ãªã‚³ãƒ¼ã‚¹ã‚’é¸å®šä¸­...</h2>
                <p class="text-gray-500 mt-2">å°‘ã€…ãŠå¾…ã¡ãã ã•ã„</p>
            </div>

            <!-- RESULT SCREEN -->
            <div id="step-result" class="hidden w-full fade-in pb-4">
                <p class="text-gray-500 mb-2 font-bold tracking-widest">DIAGNOSIS RESULT</p>
                <h2 class="text-xl font-bold text-gray-800 mb-4">ã‚ãªãŸã«ãŠã™ã™ã‚ãªã®ã¯...</h2>
                
                <div class="bg-white border-2 border-purple-100 rounded-2xl p-6 mb-6 shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-purple-100 rounded-bl-full -mr-4 -mt-4 opacity-50"></div>
                    
                    <!-- ã‚³ãƒ¼ã‚¹å -->
                    <h2 id="result-title" class="text-2xl md:text-3xl font-bold text-purple-700 mb-2 relative z-10">ã‚³ãƒ¼ã‚¹ã‚¿ã‚¤ãƒˆãƒ«</h2>
                    
                    <!-- ã‚¿ã‚° -->
                    <div id="result-tags" class="flex flex-wrap justify-center gap-2 mb-4 relative z-10">
                        <!-- JSã§ç”Ÿæˆ -->
                    </div>

                    <!-- ä¾¡æ ¼ -->
                    <div class="mb-4 py-2 border-t border-b border-gray-100">
                        <p class="text-xs text-gray-500 mb-1">å—è¬›è²»ç”¨</p>
                        <p id="result-price" class="text-lg font-bold text-gray-800 leading-tight">Â¥00,000</p>
                    </div>

                    <!-- èª¬æ˜æ–‡ï¼ˆHTMLè¨±å¯ï¼‰ -->
                    <div id="result-desc" class="text-gray-600 text-sm leading-relaxed mb-6 text-left">
                        ã“ã“ã«èª¬æ˜æ–‡ãŒå…¥ã‚Šã¾ã™ã€‚
                    </div>

                    <!-- ãƒœã‚¿ãƒ³ -->
                    <a id="result-link" href="#" target="_blank" class="block w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-3 rounded-xl hover:shadow-lg hover:opacity-90 transition-all flex items-center justify-center">
                        <i class="fas fa-external-link-alt mr-2"></i> è©³ç´°ãƒ»ç”³ã—è¾¼ã¿
                    </a>
                </div>

                <div class="space-y-3">
                    <button onclick="location.reload()" class="w-full bg-gray-100 text-gray-600 font-bold py-3 rounded-xl hover:bg-gray-200 transition-colors">
                        ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // ã‚³ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿å®šç¾©
        const courses = {
            master: {
                title: "ãƒ—ãƒ­é¤Šæˆï¼ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ¼ã‚¹",
                desc: "<b>è¬›å¸«ä¼´èµ°å‹ã®æœ€ä¸Šä½ãƒ—ãƒ©ãƒ³ã€‚</b><br>è¬›å¸«ãŒæ•°ç™¾æ™‚é–“ã¨190ä¸‡å††ä»¥ä¸Šã‹ã‘ã¦å­¦ç¿’ã—ãŸå…¨ã¦ã‚’æ³¨ãè¾¼ã‚“ã§ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒä½¿ã„æ”¾é¡Œã¨ãªã‚‹è¶…çµ¶ãŠå¾—ãªã‚³ãƒ¼ã‚¹ã§ã™ã€‚<br><span class='text-xs text-red-500 font-bold'>ï¼ˆ30ä¸‡ä»¥ä¸Šã®ä¾¡å€¤ã®ã‚ã‚‹è¬›åº§ã‚’æœˆé¡ã‚’é ‚ãäº‹ã§ãŠå®‰ãæä¾›ï¼ï¼‰</span><br><br>å€‹äººæŒ‡å°10æ™‚é–“ã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–è¦–è´ã€èª²é¡Œæ·»å‰Šã€å‹‰å¼·ä¼šç„¡æ–™ãªã©ã€ãƒ—ãƒ­ã‚’ç›®æŒ‡ã™ãŸã‚ã®å…¨ã¦ãŒè©°ã¾ã£ã¦ã„ã¾ã™ã€‚",
                price: "å…¥ä¼šé‡‘ 230,000å††<br><span class='text-sm'>ï¼‹ æœˆé¡ 3,500å††ï¼ˆç¨è¾¼ï¼‰</span>",
                link: "https://www.street-academy.com/myclass/205098?conversion_name=direct_message&tracking_code=47242da66d5b1e7cd15fef0ecceecc7b",
                tags: ["è¬›å¸«ä¼´èµ°", "å…¨ã¦æ³¨ãè¾¼ã¿", "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½¿ã„æ”¾é¡Œ", "è³ªå•æ·»å‰Šç„¡æ–™"]
            },
            labo: {
                title: "ç ”ç©¶æ‰€ï¼ˆãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¬ãƒƒã‚¹ãƒ³ï¼‰",
                desc: "<b>ç‹¬å­¦ãƒ¡ã‚¤ãƒ³ã§è³ªå•ã‚‚ã—ã£ã‹ã‚Šã—ãŸã„æ–¹å‘ã‘ã€‚</b><br>ã“ã¡ã‚‰ã‚‚ã€è¬›å¸«ãŒæ•°ç™¾æ™‚é–“ã¨190ä¸‡å††ä»¥ä¸Šã‹ã‘ã¦å­¦ç¿’ã—ãŸå…¨ã¦ã‚’æ³¨ãè¾¼ã‚“ã§ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒä½¿ã„æ”¾é¡Œã¨ãªã‚‹è¶…çµ¶ãŠå¾—ãªã‚³ãƒ¼ã‚¹ã§ã™ï¼<br>è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’å®ˆã‚ŠãªãŒã‚‰ã€ã‚ã‹ã‚‰ãªã„ç®‡æ‰€ã¯è³ªå•ã‚„æ·»å‰Šã‚’å—ã‘ã‚‰ã‚Œã¾ã™ã€‚",
                price: "å…¥ä¼šé‡‘ 100,000å††<br><span class='text-sm'>ï¼‹ æœˆé¡ 3,500å††ï¼ˆç¨è¾¼ï¼‰</span>",
                link: "https://www.street-academy.com/onetime/services/7372?conversion_name=direct_message&tracking_code=2bc62e8d583873b05034d773f10427e9",
                tags: ["ç‹¬å­¦ï¼‹è³ªå•OK", "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½¿ã„æ”¾é¡Œ", "ãƒã‚¤ãƒšãƒ¼ã‚¹"]
            },
            intro: {
                title: "å…¥é–€è¬›åº§ï¼ˆâ‘ ï¼‰",
                desc: "ã¾ãšã¯ç”Ÿå‘½ã®æ¨¹ã®å…¨ä½“æ§‹é€ ã‚„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®æµã‚Œã‚’æŠŠæ¡ã—ãŸã„æ–¹ã«ã€‚ã“ã“ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã€å¾Œã«ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ¼ã‚¹ç­‰ã¸å¤‰æ›´ã™ã‚‹å ´åˆã¯å·®é¡å‰²å¼•ã§ç§»è¡Œå¯èƒ½ã§ã™ã€‚",
                price: "50,000å†† <span class='text-sm'>ï¼ˆç¨è¾¼ï¼‰</span>",
                link: "https://www.street-academy.com/myclass/201879?conversion_name=direct_message&tracking_code=2b4963ec00e6ee7013f0ebb28ab1e7b5",
                tags: ["åŸºç¤ç†è§£", "å…¨ä½“æŠŠæ¡", "ç§»è¡Œå‰²å¼•ã‚ã‚Š"]
            },
            book: {
                title: "è‡ªå·±å­¦ç¿’ã‚µãƒãƒ¼ãƒˆï¼ˆè§£èª¬æ›¸ï¼‰",
                desc: "å°‚é–€æ›¸ã‚’ã‚ˆã‚Šã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ãŸã‚ªãƒªã‚¸ãƒŠãƒ«è§£èª¬æ›¸ã§å­¦ã¶ãƒ—ãƒ©ãƒ³ã€‚å®Œå…¨ç‹¬å­¦ã§ã€è‡ªåˆ†ã®åŠ›ã§çŸ¥è­˜ã‚’æ·±ã‚ã¦ã„ããŸã„æ–¹ã«æœ€é©ã§ã™ã€‚",
                price: "38,000å†† <span class='text-sm'>ï¼ˆç¨è¾¼ï¼‰</span>",
                link: "https://www.street-academy.com/myclass/207613?conversion_name=direct_message&tracking_code=6776a105986d711bfb124609d806c725",
                tags: ["å®Œå…¨ç‹¬å­¦", "ã‚ªãƒªã‚¸ãƒŠãƒ«è§£èª¬æ›¸", "èª­ã¿è¾¼ã¿æ´¾"]
            },
            archive: {
                title: "ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å­¦ç¿’ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£",
                desc: "éå»ã®å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¦‹æ”¾é¡Œã€‚è³ªå•ã¯å‹•ç”»å†…å®¹ã®ã¿å¯¾å¿œã€‚é †ä¸åŒã§æ§˜ã€…ãªã‚«ãƒ¼ãƒ‰ã®å†…å®¹ã«è§¦ã‚Œã‚‰ã‚Œã‚‹ã€å‹•ç”»å­¦ç¿’ãƒ¡ã‚¤ãƒ³ã®ãƒ—ãƒ©ãƒ³ã§ã™ã€‚",
                price: "æœˆé¡ 2,000å†† <span class='text-sm'>ï¼ˆç¨è¾¼ï¼‰</span>",
                link: "https://www.street-academy.com/subscription/services/4384?conversion_name=direct_message&tracking_code=fdb75bc87ea8ed36525548f8e76dc1e3",
                tags: ["å‹•ç”»è¦‹æ”¾é¡Œ", "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£", "è³ªå•OK"]
            },
            trial: {
                title: "ãŠè©¦ã—å‹‰å¼·ä¼š",
                desc: `ã€Œã¨ã‚Šã‚ãˆãšä¸€åº¦å‚åŠ ã—ã¦ã¿ãŸã„ã€ã¨ã„ã†æ–¹å‘ã‘ã€‚<br>å®Ÿéš›ã®å‹‰å¼·ä¼šã®é›°å›²æ°—ã‚’ä½“é¨“ã—ãªãŒã‚‰ã€æ¥½ã—ãã‚¿ãƒ­ãƒƒãƒˆã¨ç”Ÿå‘½ã®æ¨¹ã«è§¦ã‚Œã‚‰ã‚Œã¾ã™ã€‚<br><br>
                <div class="bg-yellow-50 border border-yellow-200 p-3 rounded-lg text-sm">
                    <strong class="text-yellow-700 block mb-1">ğŸ’¡ ãŠå¾—æƒ…å ±</strong>
                    ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ¼ã‚¹ã‚„ç ”ç©¶æ‰€ã‚’å—è¬›ã™ã‚‹ã¨ã€å‹‰å¼·ä¼šã‚’ä½•å›å—è¬›ã—ã¦ã‚‚<span class="text-red-500 font-bold">å‚åŠ è²»ç„¡æ–™</span>ã«ãªã‚Šã¾ã™ï¼
                    <div class="mt-2 space-y-1">
                        <a href="https://www.street-academy.com/myclass/205098?conversion_name=direct_message&tracking_code=47242da66d5b1e7cd15fef0ecceecc7b" target="_blank" class="block text-purple-600 hover:text-purple-800 hover:underline">
                            <i class="fas fa-chevron-right text-xs"></i> ãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ¼ã‚¹è©³ç´°
                        </a>
                        <a href="https://www.street-academy.com/onetime/services/7372?conversion_name=direct_message&tracking_code=2bc62e8d583873b05034d773f10427e9" target="_blank" class="block text-purple-600 hover:text-purple-800 hover:underline">
                            <i class="fas fa-chevron-right text-xs"></i> ç ”ç©¶æ‰€è©³ç´°
                        </a>
                    </div>
                </div>`,
                price: "æœˆé¡ 2,000å†† <span class='text-sm'>ï¼ˆç¨è¾¼ï¼‰</span>",
                link: "https://www.street-academy.com/myclass/204517?conversion_name=direct_message&tracking_code=dcb1d3f8680183f63744f916fc5be700",
                tags: ["ãŠè©¦ã—å‚åŠ ", "é›°å›²æ°—ä½“é¨“", "å˜ç™ºå—è¬›"]
            }
        };

        // çŠ¶æ…‹ç®¡ç†
        let historyStack = ['step-start'];
        let selectedCourseKey = '';
        let confirmMessage = '';

        function updateProgress(stepNum) {
            const bar = document.getElementById('progress-bar');
            // å…¨4æ®µéš (Start -> Q1 -> Q2 -> Q3(Confirm) -> Result)
            const percent = (stepNum / 4) * 100;
            bar.style.width = percent + '%';
        }

        function startDiagnosis() {
            transitionTo('q-1', 1);
        }

        function nextStep(targetId) {
            // ä¸­é–“ãƒ­ã‚¸ãƒƒã‚¯ï¼šã‚¿ãƒ¼ã‚²ãƒƒãƒˆIDã‹ã‚‰æœ€çµ‚ã‚³ãƒ¼ã‚¹ã‚’ä»®æ±ºå®šã—ã¦ç¢ºèªç”»é¢ã¸
            
            if (targetId.startsWith('q-3-')) {
                // ã“ã“ã§æœ€çµ‚æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯
                const courseKey = targetId.replace('q-3-', '');
                selectedCourseKey = courseKey;
                
                // ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç”Ÿæˆ
                if (courseKey === 'master') confirmMessage = "ã€Œãƒ—ãƒ­ã‚’ç›®æŒ‡ã—ã¦ã‚¬ãƒƒãƒ„ãƒªä¼´èµ°ã—ã¦ã»ã—ã„ã€";
                if (courseKey === 'labo') confirmMessage = "ã€Œç‹¬å­¦ãƒ¡ã‚¤ãƒ³ã ã‘ã©è³ªå•ã¯ã—ãŸã„ã€";
                if (courseKey === 'intro') confirmMessage = "ã€Œå…ˆç”Ÿã‹ã‚‰ç›´æ¥ã€åŸºç¤ã‚’æ•™ã‚ã‚ŠãŸã„ã€";
                if (courseKey === 'book') confirmMessage = "ã€Œè§£èª¬æ›¸ã‚’èª­ã‚“ã§ç‹¬å­¦ã—ãŸã„ã€";
                if (courseKey === 'trial') confirmMessage = "ã€Œå®Ÿéš›ã®å‹‰å¼·ä¼šã‚’ä½“é¨“ã—ã¦ã¿ãŸã„ã€";
                if (courseKey === 'archive') confirmMessage = "ã€Œå‹•ç”»ã§è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§è¦‹ãŸã„ã€";

                document.getElementById('confirm-text').innerText = confirmMessage;
                transitionTo('q-confirmation', 3);
            } else {
                // ã¾ã é€”ä¸­ï¼ˆQ2ã¸ï¼‰
                transitionTo(targetId, 2);
            }
        }

        function transitionTo(targetId, stepNum) {
            // ç¾åœ¨ã®ç”»é¢ã‚’éš ã™
            const current = historyStack[historyStack.length - 1];
            document.getElementById(current).classList.add('hidden');
            
            // æ–°ã—ã„ç”»é¢ã‚’è¡¨ç¤º
            const next = document.getElementById(targetId);
            next.classList.remove('hidden');
            next.classList.add('fade-in');

            // å±¥æ­´ã«è¿½åŠ 
            historyStack.push(targetId);
            
            // ãƒãƒ¼æ›´æ–°
            updateProgress(stepNum);
        }

        function backToPrevious() {
            if (historyStack.length <= 1) return;

            // ç¾åœ¨ã‚’éš ã™
            const current = historyStack.pop();
            document.getElementById(current).classList.add('hidden');
            document.getElementById(current).classList.remove('fade-in');

            // å‰ã‚’è¡¨ç¤º
            const prev = historyStack[historyStack.length - 1];
            document.getElementById(prev).classList.remove('hidden');
            document.getElementById(prev).classList.add('fade-in');

            // ãƒãƒ¼ã‚’å°‘ã—æˆ»ã™ï¼ˆç°¡æ˜“è¨ˆç®—ï¼‰
            const newStep = Math.max(0, historyStack.length - 1);
            updateProgress(newStep);
        }
        
        // ç‰¹å®šã®IDã¾ã§æˆ»ã‚‹ï¼ˆQ1ã¸æˆ»ã‚‹ãªã©ï¼‰
        function backTo(targetId) {
            // å±¥æ­´ã‚’targetIdãŒè¦‹ã¤ã‹ã‚‹ã¾ã§popã™ã‚‹ï¼ˆä»Šå›ã¯ç°¡æ˜“çš„ã«ãƒªãƒ­ãƒ¼ãƒ‰ã«è¿‘ã„æŒ™å‹•ã§ã‚‚ã‚ˆã„ãŒã€UIçš„ã«æˆ»ã‚‹ï¼‰
            while(historyStack.length > 0) {
                const current = historyStack[historyStack.length - 1];
                if (current === targetId) break;
                
                document.getElementById(current).classList.add('hidden');
                historyStack.pop();
            }
            const prev = historyStack[historyStack.length - 1];
            document.getElementById(prev).classList.remove('hidden');
            document.getElementById(prev).classList.add('fade-in');
            updateProgress(1); // Q1ã¯Step1
        }

        function showResult() {
            // ç¢ºèªç”»é¢ã‚’æ¶ˆã™
            document.getElementById('q-confirmation').classList.add('hidden');
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            document.getElementById('step-loading').classList.remove('hidden');
            updateProgress(4);

            setTimeout(() => {
                document.getElementById('step-loading').classList.add('hidden');
                
                // ãƒ‡ãƒ¼ã‚¿æµã—è¾¼ã¿
                const data = courses[selectedCourseKey];
                document.getElementById('result-title').innerText = data.title;
                // HTMLã¨ã—ã¦æŒ¿å…¥ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ (ãƒªãƒ³ã‚¯ãªã©ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚)
                document.getElementById('result-desc').innerHTML = data.desc;
                document.getElementById('result-price').innerHTML = data.price;
                document.getElementById('result-link').href = data.link;

                // ã‚¿ã‚°ç”Ÿæˆ
                const tagBox = document.getElementById('result-tags');
                tagBox.innerHTML = '';
                data.tags.forEach(tag => {
                    const span = document.createElement('span');
                    span.className = "text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full font-bold";
                    span.innerText = tag;
                    tagBox.appendChild(span);
                });

                document.getElementById('step-result').classList.remove('hidden');
            }, 1500);
        }
    </script>
</body>
</html>
