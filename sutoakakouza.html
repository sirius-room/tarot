<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>あなたにピッタリの講座は？ | 生命の樹タロット</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;700&display=swap');
        
        body {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-option {
            transition: all 0.3s ease;
        }

        .btn-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(106, 17, 203, 0.2);
            border-color: #9333ea;
        }
        
        .btn-option:active {
            transform: translateY(0);
        }

        .hidden {
            display: none;
        }

        /* 質問番号のスタイル */
        .q-badge {
            background: #f3e8ff;
            color: #9333ea;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div class="glass-card w-full max-w-lg rounded-3xl overflow-hidden relative min-h-[600px] flex flex-col">
        
        <!-- Progress Bar -->
        <div class="w-full h-2 bg-gray-100">
            <div id="progress-bar" class="h-full bg-purple-600 transition-all duration-500 w-0"></div>
        </div>

        <!-- Content Area -->
        <div class="p-6 md:p-8 flex-1 flex flex-col justify-center items-center text-center relative z-10 w-full">
            
            <!-- START SCREEN -->
            <div id="step-start" class="fade-in w-full">
                <div class="mb-8">
                    <span class="inline-block p-5 rounded-full bg-purple-100 text-purple-600 mb-6">
                        <i class="fas fa-magic text-4xl"></i>
                    </span>
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 mb-4">あなたに最適な<br>学びのコースは？</h1>
                    <p class="text-gray-600 leading-relaxed">
                        いくつかの質問に答えるだけで、<br>
                        今のあなたの希望や目的に<br>
                        ピッタリな講座をご提案します。
                    </p>
                </div>
                <button onclick="startDiagnosis()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 px-10 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 w-full sm:w-auto text-lg">
                    診断スタート
                </button>
            </div>

            <!-- Q1: 目的 (Route分岐) -->
            <div id="q-1" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 1 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">今回の学びの目的は？</h2>
                
                <div class="space-y-4">
                    <button onclick="nextStep('q-2-pro')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                            <i class="fas fa-crown text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-800 text-lg">プロを目指す・極めたい</div>
                            <div class="text-sm text-gray-500">本格的に学び、使いこなせるようになりたい</div>
                        </div>
                    </button>
                    
                    <button onclick="nextStep('q-2-basic')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                            <i class="fas fa-seedling text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-800 text-lg">基礎を知りたい・始めたい</div>
                            <div class="text-sm text-gray-500">まずは全体像や基本をしっかり学びたい</div>
                        </div>
                    </button>

                    <button onclick="nextStep('q-2-trial')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="bg-purple-100 text-purple-600 w-12 h-12 rounded-full flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                            <i class="fas fa-coffee text-xl"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-800 text-lg">気軽に覗きたい・独学派</div>
                            <div class="text-sm text-gray-500">お試し参加や、マイペースに学びたい</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Q2-Pro: 本格派向けの質問 -->
            <div id="q-2-pro" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 2 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">希望するサポート体制は？</h2>
                <div class="space-y-4">
                    <button onclick="nextStep('q-3-master')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">手取り足取り伴走してほしい<br><span class="text-sm text-gray-500 font-normal">（講師伴走・フルサポート）</span></div>
                    </button>
                    <button onclick="nextStep('q-3-labo')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">基本は独学、質問だけしたい<br><span class="text-sm text-gray-500 font-normal">（自分のペースで質問添削OK）</span></div>
                    </button>
                </div>
                <button onclick="backTo('q-1')" class="mt-8 text-gray-400 text-sm hover:text-gray-600 block text-center w-full">← 戻る</button>
            </div>

            <!-- Q2-Basic: 基礎派向けの質問 -->
            <div id="q-2-basic" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 2 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">得意な学び方はどっち？</h2>
                <div class="space-y-4">
                    <button onclick="nextStep('q-3-intro')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">先生から直接教わりたい<br><span class="text-sm text-gray-500 font-normal">（ライブ講義・対話形式）</span></div>
                    </button>
                    <button onclick="nextStep('q-3-book')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">解説書を読んで理解したい<br><span class="text-sm text-gray-500 font-normal">（テキスト派・完全独学）</span></div>
                    </button>
                </div>
                <button onclick="backTo('q-1')" class="mt-8 text-gray-400 text-sm hover:text-gray-600 block text-center w-full">← 戻る</button>
            </div>

            <!-- Q2-Trial: お試し派向けの質問 -->
            <div id="q-2-trial" class="hidden w-full text-left">
                <span class="q-badge">QUESTION 2 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-6">興味があるのは？</h2>
                <div class="space-y-4">
                    <button onclick="nextStep('q-3-trial')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">実際の勉強会に参加してみたい<br><span class="text-sm text-gray-500 font-normal">（リアルタイムの雰囲気重視）</span></div>
                    </button>
                    <button onclick="nextStep('q-3-archive')" class="btn-option w-full bg-white border-2 border-gray-100 p-5 rounded-xl flex items-center group">
                        <div class="font-bold text-gray-800 block w-full text-center">過去の動画を色々見たい<br><span class="text-sm text-gray-500 font-normal">（動画視聴のみ・順不同OK）</span></div>
                    </button>
                </div>
                <button onclick="backTo('q-1')" class="mt-8 text-gray-400 text-sm hover:text-gray-600 block text-center w-full">← 戻る</button>
            </div>

            <!-- Q3: 確認 (共通クッションページ) -->
            <div id="q-confirmation" class="hidden w-full text-center">
                <span class="q-badge">QUESTION 3 / 3</span>
                <h2 class="text-2xl font-bold text-gray-800 mb-8">最後に確認です！<br>この条件で探しますか？</h2>
                
                <div class="bg-purple-50 p-6 rounded-xl mb-8">
                    <p id="confirm-text" class="text-lg text-purple-800 font-bold mb-2">条件テキスト</p>
                    <p class="text-sm text-gray-600">に合うコースを検索します</p>
                </div>

                <button onclick="showResult()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 px-10 rounded-full shadow-lg hover:shadow-xl transition-all w-full">
                    診断結果を見る
                </button>
                <button onclick="backToPrevious()" class="mt-6 text-gray-400 text-sm hover:text-gray-600">← 変更する</button>
            </div>


            <!-- LOADING SCREEN -->
            <div id="step-loading" class="hidden w-full text-center">
                <div class="mb-4">
                    <i class="fas fa-circle-notch fa-spin text-5xl text-purple-600"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-800">最適なコースを選定中...</h2>
                <p class="text-gray-500 mt-2">少々お待ちください</p>
            </div>

            <!-- RESULT SCREEN -->
            <div id="step-result" class="hidden w-full fade-in pb-4">
                <p class="text-gray-500 mb-2 font-bold tracking-widest">DIAGNOSIS RESULT</p>
                <h2 class="text-xl font-bold text-gray-800 mb-4">あなたにおすすめなのは...</h2>
                
                <div class="bg-white border-2 border-purple-100 rounded-2xl p-6 mb-6 shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-24 h-
