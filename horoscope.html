<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¿ãƒ­ãƒƒãƒˆã¨æ˜Ÿã®èª¿å’Œï¼šç”Ÿå‘½ã®æ¨¹ã¸ã®æ—…</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #fdf2f8; /* æ·¡ã„ãƒ”ãƒ³ã‚¯ç³»ã®èƒŒæ™¯ */
            color: #475569; /* æ¿ƒã„ã‚°ãƒ¬ãƒ¼ã®æ–‡å­— */
            overflow-x: hidden;
        }
        .pastel-bg {
            background-image: 
                radial-gradient(#fbcfe8 20%, transparent 20%),
                radial-gradient(#bae6fd 20%, transparent 20%);
            background-size: 40px 40px, 40px 40px;
            background-position: 0 0, 20px 20px;
            opacity: 0.3;
        }
        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .soft-glow {
            box-shadow: 0 0 15px rgba(251, 207, 232, 0.6);
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ ---
        
        const STORY_PHASES = [
            {
                id: 1,
                title: "ç¬¬1ç« ï¼šå°ã‚¢ãƒ«ã‚«ãƒŠã¨å¤©ä½“ã®éŸ¿ã",
                desc: "æ•°æœ­ï¼ˆå°ã‚¢ãƒ«ã‚«ãƒŠï¼‰ã¯ã€ç”Ÿå‘½ã®æ¨¹ã®ã‚»ãƒ•ã‚£ãƒ©ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ãã‚Œãã‚Œã®æ•°å­—ãŒæŒã¤ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ã€ãã‚Œã‚’è±¡å¾´ã™ã‚‹å¤©ä½“ã®é–¢ä¿‚ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚",
                bg: "from-pink-100 to-rose-200"
            },
            {
                id: 2,
                title: "ç¬¬2ç« ï¼šå¤§ã‚¢ãƒ«ã‚«ãƒŠã¨æ˜Ÿåº§ã®ç‰©èª",
                desc: "å¤§ã‚¢ãƒ«ã‚«ãƒŠã¯é­‚ã®å¤§ããªå¤‰å®¹ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚ã‚«ãƒ¼ãƒ‰ã«ç§˜ã‚ã‚‰ã‚ŒãŸæ˜Ÿåº§ï¼ˆã‚µã‚¤ãƒ³ï¼‰ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’èª­ã¿è§£ãã€ã‚ˆã‚Šæ·±ã„ç†è§£ã¸ã¨é€²ã¿ã¾ã™ã€‚",
                bg: "from-sky-100 to-blue-200"
            }
        ];

        const QUIZ_DATA = [
            // --- ç¬¬1ç« ï¼šå°ã‚¢ãƒ«ã‚«ãƒŠã¨å¤©ä½“ (Q1-10) ---
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã‚¿ãƒ­ãƒƒãƒˆã®ã€Œã‚¨ãƒ¼ã‚¹ï¼ˆ1ï¼‰ã€ã¯ã€ç”Ÿå‘½ã®æ¨¹ã®ã€Œã‚±ãƒ†ãƒ«ï¼ˆç‹å† ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚ã“ã®ã‚»ãƒ•ã‚£ãƒ©ã«å¯¾å¿œã™ã‚‹å¤©ä½“ï¼ˆç¾ä»£çš„ãªè§£é‡ˆï¼‰ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                options: ["æµ·ç‹æ˜Ÿ", "å†¥ç‹æ˜Ÿ", "å¤ªé™½", "å¤©ç‹æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œæµ·ç‹æ˜Ÿã€ã§ã™ã€‚\nã‚±ãƒ†ãƒ«ã¯ç„¡é™ã®å®‡å®™ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚„å¢ƒç•Œã®æº¶è§£ã‚’è¡¨ã—ã€ç¾ä»£ã®è§£é‡ˆã§ã¯æµ·ç‹æ˜Ÿï¼ˆã¾ãŸã¯ç¬¬ä¸€å°å› ï¼‰ã«å¯¾å¿œä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚",
                icon: "ğŸ‘‘"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ2ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œã‚³ã‚¯ãƒãƒ¼ï¼ˆçŸ¥æµï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚å æ˜Ÿè¡“ã«ãŠã„ã¦ã€Œé©æ–°ã‚„é©å‘½ã€ç‹¬å‰µã€ã‚’è±¡å¾´ã™ã‚‹ã€ã“ã®ã‚»ãƒ•ã‚£ãƒ©ã®å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["å¤©ç‹æ˜Ÿ", "åœŸæ˜Ÿ", "æœ¨æ˜Ÿ", "ç«æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œå¤©ç‹æ˜Ÿã€ã§ã™ã€‚\nã‚³ã‚¯ãƒãƒ¼ã¯å‰µé€ çš„ç ´å£Šã‚„ç´”ç²‹ãªå‰µé€ åŠ›ã‚’è¡¨ã—ã€å æ˜Ÿè¡“ã«ãŠã„ã¦ã€Œé©æ–°ã‚„é©å‘½ã€ã‚’è±¡å¾´ã™ã‚‹å¤©ç‹æ˜Ÿã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "âš¡"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ3ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œãƒ“ãƒŠãƒ¼ï¼ˆç†è§£ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚å½¢ã‚’ä¸ãˆã€åˆ¶é™ã‚„æ§‹é€ ã‚’ä½œã‚‹åƒãã‚’æŒã¤ã€å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["åœŸæ˜Ÿ", "é‡‘æ˜Ÿ", "æœˆ", "æ°´æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€ŒåœŸæ˜Ÿã€ã§ã™ã€‚\nãƒ“ãƒŠãƒ¼ã¯æ¯ãªã‚‹æµ·ã¨ã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å™¨ï¼ˆå½¢ï¼‰ã‚’ä¸ãˆã¾ã™ã€‚åˆ¶é™ã‚„æ§‹é€ åŒ–ã‚’å¸ã‚‹åœŸæ˜Ÿã¨å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "ğŸª"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ4ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œã‚±ã‚»ãƒ‰ï¼ˆæ…ˆæ‚²ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚æ‹¡å¤§ãƒ»ç™ºå±•ãƒ»å¯›å®¹ã•ã‚’è±¡å¾´ã™ã‚‹ã€ã“ã®ã‚»ãƒ•ã‚£ãƒ©ã®å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["æœ¨æ˜Ÿ", "å¤ªé™½", "é‡‘æ˜Ÿ", "æµ·ç‹æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œæœ¨æ˜Ÿã€ã§ã™ã€‚\nã‚±ã‚»ãƒ‰ã¯è‚¯å®šã—ã€åºƒã’ã€è‚²ã‚€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æŒã¡ã¾ã™ã€‚å æ˜Ÿè¡“ã§æœ€å¤§ã®å‰æ˜Ÿã¨ã•ã‚Œã‚‹æœ¨æ˜Ÿã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™ƒ"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ5ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œã‚²ãƒ–ãƒ©ãƒ¼ï¼ˆå³»å³ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚ä¸è¦ãªã‚‚ã®ã‚’åˆ‡ã‚Šæ¨ã¦ã€è¡Œå‹•åŠ›ã‚’ä¸ãˆã‚‹ã€å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["ç«æ˜Ÿ", "åœŸæ˜Ÿ", "å¤©ç‹æ˜Ÿ", "å†¥ç‹æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œç«æ˜Ÿã€ã§ã™ã€‚\nã‚²ãƒ–ãƒ©ãƒ¼ã¯æ­£ç¾©ã€æˆ¦ã„ã€ç ´å£Šã¨æ”¹é©ã‚’å¸ã‚Šã¾ã™ã€‚è¡Œå‹•åŠ›ã¨æ”»æ’ƒæ€§ã‚’è±¡å¾´ã™ã‚‹ç«æ˜Ÿã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™‚ï¸"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ6ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œãƒ†ã‚£ãƒ•ã‚¡ãƒ¬ãƒˆï¼ˆç¾ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚ç”Ÿå‘½ã®æ¨¹ã®ä¸­å¿ƒã«ä½ç½®ã—ã€å…¨ä½“ã‚’çµ±åˆã™ã‚‹å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["å¤ªé™½", "æœˆ", "åœ°çƒ", "æœ¨æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œå¤ªé™½ã€ã§ã™ã€‚\nãƒ†ã‚£ãƒ•ã‚¡ãƒ¬ãƒˆã¯ç”Ÿå‘½ã®æ¨¹ã®å¿ƒè‡“éƒ¨ã§ã‚ã‚Šã€ãƒã‚¤ãƒ¤ãƒ¼ã‚»ãƒ«ãƒ•ã‚„æœ¬æ¥ã®è‡ªåˆ†ã‚’è±¡å¾´ã—ã¾ã™ã€‚å¤ªé™½ç³»ã®ä¸­å¿ƒã§ã‚ã‚‹å¤ªé™½ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â˜€ï¸"
            },
            {
                // Q7: è§£èª¬ã‚’ä¿®æ­£ï¼ˆæ„Ÿæƒ…ã‚„æ¬²ã‚’å¸ã‚‹ï¼‰
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ7ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œãƒãƒ„ã‚¡ã‚¯ï¼ˆå‹åˆ©ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚æ„Ÿæƒ…ã€æ„›ã€èŠ¸è¡“ã€å¿«æ¥½ã‚’å¸ã‚‹ã€å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["é‡‘æ˜Ÿ", "æ°´æ˜Ÿ", "æœˆ", "æµ·ç‹æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œé‡‘æ˜Ÿã€ã§ã™ã€‚\nãƒãƒ„ã‚¡ã‚¯ã¯ã€Œæ„Ÿæƒ…ã‚„æ¬²ã€ã‚’å¸ã‚‹ã‚»ãƒ•ã‚£ãƒ©ã§ã™ã€‚æƒ…ç·’çš„ãªå´é¢ã‚„ç¾æ„è­˜ã‚‚è¡¨ã—ã€æ„›ã¨ç¾ã®å¥³ç¥ãƒ´ã‚£ãƒ¼ãƒŠã‚¹ï¼ˆé‡‘æ˜Ÿï¼‰ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™€ï¸"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ8ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œãƒ›ãƒ‰ï¼ˆæ „å…‰ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚æ€è€ƒã€æƒ…å ±å‡¦ç†ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¸ã‚‹ã€å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["æ°´æ˜Ÿ", "å¤©ç‹æ˜Ÿ", "æœ¨æ˜Ÿ", "ç«æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œæ°´æ˜Ÿã€ã§ã™ã€‚\nãƒ›ãƒ‰ã¯çŸ¥æ€§ã‚„è«–ç†ã€åˆ†æã‚’å¸ã‚Šã¾ã™ã€‚æƒ…å ±ã®ä¼é”è€…ã§ã‚ã‚‹ãƒ˜ãƒ«ãƒ¡ã‚¹ï¼ˆæ°´æ˜Ÿï¼‰ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â˜¿ï¸"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ9ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œã‚¤ã‚¨ã‚½ãƒ‰ï¼ˆåŸºç¤ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚ç„¡æ„è­˜ã€å¤¢ã€å¹»å½±ã€ã‚µã‚¤ã‚­ãƒƒã‚¯ãªé ˜åŸŸã‚’å¸ã‚‹ã€å¯¾å¿œå¤©ä½“ã¯ï¼Ÿ",
                options: ["æœˆ", "æµ·ç‹æ˜Ÿ", "å†¥ç‹æ˜Ÿ", "åœŸæ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œæœˆã€ã§ã™ã€‚\nã‚¤ã‚¨ã‚½ãƒ‰ã¯ç‰©è³ªç•Œã®ç›´ä¸Šã«ã‚ã‚Šã€æ½œåœ¨æ„è­˜ã®é ˜åŸŸã§ã™ã€‚å¤œã«è¦‹ãˆéš ã‚Œã—ã€ç„¡æ„è­˜ã‚’è±¡å¾´ã™ã‚‹æœˆã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "ğŸŒ™"
            },
            {
                q: "ã€å°ã‚¢ãƒ«ã‚«ãƒŠã€‘ã€Œ10ã®ã‚«ãƒ¼ãƒ‰ã€ã¯ã€Œãƒãƒ«ã‚¯ãƒˆï¼ˆç‹å›½ï¼‰ã€ã«å¯¾å¿œã—ã¾ã™ã€‚ã™ã¹ã¦ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå…·ä½“åŒ–ãƒ»çµæ™¶åŒ–ã—ãŸå ´æ‰€ã¨ã—ã¦å¯¾å¿œã™ã‚‹å¤©ä½“ã¯ï¼Ÿ",
                options: ["åœ°çƒ", "åœŸæ˜Ÿ", "å¤ªé™½", "å†¥ç‹æ˜Ÿ"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œåœ°çƒã€ã§ã™ã€‚\nãƒãƒ«ã‚¯ãƒˆã¯ç§ãŸã¡ãŒä½ã‚€ç¾å®Ÿä¸–ç•Œãã®ã‚‚ã®ã§ã™ã€‚4å¤§å…ƒç´ ãŒçµ±åˆã•ã‚Œå½¢ã¨ãªã£ãŸå ´æ‰€ã€ã¤ã¾ã‚Šåœ°çƒã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "ğŸŒ"
            },

            // --- ç¬¬2ç« ï¼šå¤§ã‚¢ãƒ«ã‚«ãƒŠã¨æ˜Ÿåº§ (Q11-15) ---
            {
                q: "ã€å¤§ã‚¢ãƒ«ã‚«ãƒŠã€‘ã‚«ãƒ¼ãƒ‰ç•ªå·4ã€Œçš‡å¸ã€ã«å¯¾å¿œã™ã‚‹ã€æ´»å‹•çš„ã§ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’è¡¨ã™ã‚µã‚¤ãƒ³ï¼ˆæ˜Ÿåº§ï¼‰ã¯ï¼Ÿ",
                options: ["ç‰¡ç¾Šåº§", "ç…å­åº§", "å±±ç¾Šåº§", "å¤©ç§¤åº§"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œç‰¡ç¾Šåº§ã€ã§ã™ã€‚\nçš‡å¸ã¯çˆ¶æ€§ã€æ”¯é…ã€ç§©åºã¸ã®æ„å¿—ã‚’è¡¨ã—ã¾ã™ã€‚12æ˜Ÿåº§ã®ãƒˆãƒƒãƒ—ãƒãƒƒã‚¿ãƒ¼ã§ã‚ã‚Šã€ç«æ˜Ÿã‚’æ”¯é…æ˜Ÿã«æŒã¤ç‰¡ç¾Šåº§ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™ˆ"
            },
            {
                q: "ã€å¤§ã‚¢ãƒ«ã‚«ãƒŠã€‘ã‚«ãƒ¼ãƒ‰ç•ªå·9ã€Œéš è€…ã€ã«å¯¾å¿œã™ã‚‹ã€åˆ†æåŠ›ã¨å¥‰ä»•ã€å†…çœã‚’è¡¨ã™ã‚µã‚¤ãƒ³ã¯ï¼Ÿ",
                options: ["ä¹™å¥³åº§", "å°„æ‰‹åº§", "æ°´ç“¶åº§", "é­šåº§"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œä¹™å¥³åº§ã€ã§ã™ã€‚\néš è€…ã¯å†…ãªã‚‹å…‰ã‚’æ¢æ±‚ã—ã€ç´°éƒ¨ã‚’è¦‹æ¥µã‚ã‚‹ã‚«ãƒ¼ãƒ‰ã§ã™ã€‚æ°´æ˜Ÿã‚’å®ˆè­·æ˜Ÿã«æŒã¡ã€åˆ†æã¨æ•´ç†æ•´é “ã‚’å¸ã‚‹ä¹™å¥³åº§ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™"
            },
            {
                q: "ã€å¤§ã‚¢ãƒ«ã‚«ãƒŠã€‘ã‚«ãƒ¼ãƒ‰ç•ªå·13ã€Œæ­»ç¥ã€ã«å¯¾å¿œã™ã‚‹ã€å¤‰å®¹ã¨å†ç”Ÿã€æ·±ã„çµ†ã‚’è¡¨ã™ã‚µã‚¤ãƒ³ã¯ï¼Ÿ",
                options: ["è åº§", "å±±ç¾Šåº§", "æ°´ç“¶åº§", "é­šåº§"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œè åº§ã€ã§ã™ã€‚\næ­»ç¥ã¯çµ‚ã‚ã‚Šã¨å§‹ã¾ã‚Šã€æ ¹æœ¬çš„ãªå¤‰å®¹ã‚’è¡¨ã—ã¾ã™ã€‚æ­»ã¨å†ç”Ÿã‚’å¸ã‚‹å†¥ç‹æ˜Ÿã‚’å®ˆè­·æ˜Ÿã«æŒã¤è åº§ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™"
            },
            {
                // Q14: å•é¡Œæ–‡ã¨è§£èª¬ã‚’ä¿®æ­£
                q: "ã€å¤§ã‚¢ãƒ«ã‚«ãƒŠã€‘ã‚«ãƒ¼ãƒ‰ç•ªå·17ã€Œæ˜Ÿã€ã«å¯¾å¿œã™ã‚‹ã€ã€Œå€‹æ€§çš„ãƒ»ç‹¬å‰µçš„ã§ã€ç‰©äº‹ã®æœ¬è³ªã‚’è¦‹æŠœãã€æ€§è³ªã‚’è¡¨ã™ã‚µã‚¤ãƒ³ã¯ï¼Ÿ",
                options: ["æ°´ç“¶åº§", "é­šåº§", "åŒå­åº§", "ä¹™å¥³åº§"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œæ°´ç“¶åº§ã€ã§ã™ã€‚\næ˜Ÿã®ã‚«ãƒ¼ãƒ‰ã¯ã€Œæ½œåœ¨æ„è­˜ã‚„ç„¡æ„è­˜ã®åˆ¶é™ã‚„å›ºå®šæ¦‚å¿µãŒå¤–ã‚ŒãŸæ™‚ã«èµ·ã“ã‚‹å¸Œæœ›ã‚„ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚’è¡¨ã—ã¾ã™ã€‚å€‹æ€§çš„ãƒ»ç‹¬å‰µçš„ã§ç‰©äº‹ã®æœ¬è³ªã‚’è¦‹æŠœãæ°´ç“¶åº§ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™’"
            },
            {
                q: "ã€å¤§ã‚¢ãƒ«ã‚«ãƒŠã€‘ã‚«ãƒ¼ãƒ‰ç•ªå·18ã€Œæœˆã€ã«å¯¾å¿œã™ã‚‹ã€ç„¡æ„è­˜ã€å¹»å½±ã€å¢ƒç•Œã®æº¶è§£ã‚’è¡¨ã™ã‚µã‚¤ãƒ³ã¯ï¼Ÿ",
                options: ["é­šåº§", "èŸ¹åº§", "è åº§", "ä¹™å¥³åº§"],
                a: 0,
                exp: "æ­£è§£ã¯ã€Œé­šåº§ã€ã§ã™ã€‚\næœˆã®ã‚«ãƒ¼ãƒ‰ã¯ä¸å®‰ã‚„å¹»å½±ã€ç„¡æ„è­˜ã®ä¸–ç•Œã¸ã®æ²¡å…¥ã‚’è¡¨ã—ã¾ã™ã€‚æµ·ç‹æ˜Ÿã‚’å®ˆè­·æ˜Ÿã«æŒã¡ã€å½¢ã®ãªã„ä¸–ç•Œã‚’æ¼‚ã†é­šåº§ã«å¯¾å¿œã—ã¾ã™ã€‚",
                icon: "â™“"
            }
        ];

        // --- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ---

        const App = () => {
            const [gameState, setGameState] = useState('intro');
            const [currentQIndex, setCurrentQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [showExp, setShowExp] = useState(false);
            const [lastAnswerCorrect, setLastAnswerCorrect] = useState(false);
            const [chapter, setChapter] = useState(0);
            const [showChapterCover, setShowChapterCover] = useState(false);

            const startQuiz = () => {
                setGameState('game');
                setChapter(0);
                setShowChapterCover(true);
            };

            const handleAnswer = (choiceIndex) => {
                const isCorrect = choiceIndex === QUIZ_DATA[currentQIndex].a;
                if (isCorrect) setScore(score + 1);
                setLastAnswerCorrect(isCorrect);
                setShowExp(true);
            };

            const nextQuestion = () => {
                setShowExp(false);
                const nextIdx = currentQIndex + 1;
                
                // ç« ã®åˆ‡ã‚Šæ›¿ãˆ (Q11ã®æ‰‹å‰)
                if (nextIdx === 10) { 
                    setChapter(1);
                    setShowChapterCover(true);
                }

                if (nextIdx < QUIZ_DATA.length) {
                    setCurrentQIndex(nextIdx);
                } else {
                    setGameState('result');
                }
            };

            const closeChapterCover = () => {
                setShowChapterCover(false);
            };

            const progress = ((currentQIndex) / QUIZ_DATA.length) * 100;

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4 relative text-slate-700">
                    
                    {/* èƒŒæ™¯è£…é£¾ï¼šãƒ‘ã‚¹ãƒ†ãƒ«ã‚«ãƒ©ãƒ¼ã®èƒŒæ™¯ */}
                    <div className="fixed inset-0 pointer-events-none z-0 bg-gradient-to-br from-pink-50 via-white to-sky-50 pastel-bg"></div>

                    {/* ãµã‚ãµã‚ã—ãŸã‚ªãƒ¼ãƒ– */}
                    <div className="fixed inset-0 pointer-events-none z-0 flex justify-center items-center overflow-hidden">
                        <div className="absolute top-10 left-10 w-64 h-64 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse"></div>
                        <div className="absolute bottom-10 right-10 w-64 h-64 bg-sky-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse delay-1000"></div>
                        <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse delay-2000"></div>
                    </div>

                    <div className="z-10 w-full max-w-2xl">
                        {gameState === 'intro' && (
                            <IntroScreen onStart={startQuiz} />
                        )}

                        {gameState === 'game' && (
                            showChapterCover ? (
                                <ChapterCover phase={STORY_PHASES[chapter]} onNext={closeChapterCover} />
                            ) : (
                                <QuizCard 
                                    data={QUIZ_DATA[currentQIndex]} 
                                    onAnswer={handleAnswer}
                                    showExp={showExp}
                                    isCorrect={lastAnswerCorrect}
                                    onNext={nextQuestion}
                                    progress={progress}
                                    qNum={currentQIndex + 1}
                                />
                            )
                        )}

                        {gameState === 'result' && (
                            <ResultScreen score={score} total={QUIZ_DATA.length} onRetry={() => window.location.reload()} />
                        )}
                    </div>
                </div>
            );
        };

        const IntroScreen = ({ onStart }) => (
            <div className="glass-panel p-10 rounded-3xl shadow-xl text-center fade-in">
                <div className="text-6xl mb-4">ğŸ”®</div>
                <h1 className="text-3xl md:text-4xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-pink-500">
                    ã‚¿ãƒ­ãƒƒãƒˆã¨æ˜Ÿã®èª¿å’Œ<br/>
                    <span className="text-xl md:text-2xl text-slate-500 font-normal mt-2 block">ç”Ÿå‘½ã®æ¨¹ã¸ã®æ—…</span>
                </h1>
                <p className="text-lg mb-8 leading-relaxed text-slate-600">
                    ã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ä¸€æšä¸€æšã«ã¯ã€<br/>
                    å®‡å®™ã®æ˜Ÿã€…ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå®¿ã£ã¦ã„ã¾ã™ã€‚<br/><br/>
                    å æ˜Ÿè¡“ã®çŸ¥è­˜ã‚’éµã«ã—ã¦ã€<br/>
                    ç”Ÿå‘½ã®æ¨¹ã®ç¥ç§˜ã‚’è§£ãæ˜ã‹ã—ã¾ã—ã‚‡ã†ã€‚
                </p>
                <div className="space-y-4 mb-8 text-left bg-white/50 p-6 rounded-2xl border border-white">
                    <p>ğŸŒ™ <b>ç¬¬1ç« :</b> å°ã‚¢ãƒ«ã‚«ãƒŠã¨å¤©ä½“ï¼ˆæ•°æœ­ã®ç§˜å¯†ï¼‰</p>
                    <p>âœ¨ <b>ç¬¬2ç« :</b> å¤§ã‚¢ãƒ«ã‚«ãƒŠã¨æ˜Ÿåº§ï¼ˆé­‚ã®å¤‰å®¹ï¼‰</p>
                </div>
                <button 
                    onClick={onStart}
                    className="bg-gradient-to-r from-pink-400 to-purple-400 hover:from-pink-500 hover:to-purple-500 text-white font-bold py-4 px-12 rounded-full text-xl shadow-lg transform transition hover:scale-105 active:scale-95"
                >
                    æ‰‰ã‚’é–‹ã
                </button>
            </div>
        );

        const ChapterCover = ({ phase, onNext }) => (
            <div className={`fixed inset-0 z-50 flex flex-col items-center justify-center p-8 bg-gradient-to-b ${phase.bg} text-slate-700 fade-in`}>
                <div className="text-8xl mb-6 opacity-80">ğŸ“–</div>
                <h2 className="text-3xl font-bold mb-6 border-b-2 border-white/50 pb-4 text-center">{phase.title}</h2>
                <p className="text-xl mb-12 max-w-xl text-center leading-loose font-medium text-slate-700/90">{phase.desc}</p>
                <button 
                    onClick={onNext}
                    className="bg-white/40 hover:bg-white/60 border border-white text-slate-700 font-bold py-3 px-10 rounded-full backdrop-blur-md transition shadow-lg"
                >
                    ç‰©èªã‚’å§‹ã‚ã‚‹
                </button>
            </div>
        );

        const QuizCard = ({ data, onAnswer, showExp, isCorrect, onNext, progress, qNum }) => (
            <div className="w-full">
                {/* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */}
                <div className="w-full bg-white/50 h-3 rounded-full mb-6 border border-white">
                    <div className="bg-gradient-to-r from-pink-300 to-purple-300 h-3 rounded-full transition-all duration-500 soft-glow" style={{ width: `${progress}%` }}></div>
                </div>

                <div className="glass-panel p-6 md:p-8 rounded-3xl shadow-xl relative overflow-hidden fade-in min-h-[450px] flex flex-col justify-between">
                    
                    {!showExp && (
                        <>
                            <div>
                                <div className="text-purple-400 text-sm mb-2 font-bold tracking-widest flex justify-between">
                                    <span>QUESTION {qNum} / {15}</span>
                                    <span>ã‚¿ãƒ­ãƒƒãƒˆ Ã— å æ˜Ÿè¡“</span>
                                </div>
                                <h3 className="text-xl md:text-2xl font-bold mb-8 leading-relaxed text-slate-700">{data.q}</h3>
                            </div>
                            <div className="grid gap-3">
                                {data.options.map((opt, i) => (
                                    <button 
                                        key={i}
                                        onClick={() => onAnswer(i)}
                                        className="w-full text-left p-4 rounded-2xl bg-white/60 hover:bg-purple-100/60 border border-white/80 hover:border-purple-300 transition-all active:scale-98 flex items-center group shadow-sm hover:shadow-md"
                                    >
                                        <span className="bg-purple-100 w-8 h-8 rounded-full flex items-center justify-center mr-4 text-sm font-bold shrink-0 text-purple-600 group-hover:bg-purple-500 group-hover:text-white transition-colors">{i + 1}</span>
                                        <span className="text-lg text-slate-600 group-hover:text-purple-700">{opt}</span>
                                    </button>
                                ))}
                            </div>
                        </>
                    )}

                    {showExp && (
                        <div className="fade-in h-full flex flex-col">
                            <div className="flex items-center mb-6 border-b border-purple-100 pb-4">
                                <div className={`text-5xl mr-4 ${isCorrect ? 'animate-bounce' : 'animate-pulse'}`}>
                                    {isCorrect ? 'ğŸŒ¸' : 'ğŸ’§'}
                                </div>
                                <div>
                                    <div className={`text-2xl font-bold ${isCorrect ? 'text-pink-500' : 'text-blue-400'}`}>
                                        {isCorrect ? 'æ­£è§£ã§ã™ï¼' : 'æƒœã—ã„ï¼'}
                                    </div>
                                    <div className="text-sm text-slate-400">
                                        {isCorrect ? 'æ˜Ÿã€…ã®å£°ãŒèã“ãˆã¦ã„ã‚‹ã‚ˆã†ã§ã™' : 'è§£èª¬ã‚’èª­ã‚“ã§ç†è§£ã‚’æ·±ã‚ã¾ã—ã‚‡ã†'}
                                    </div>
                                </div>
                            </div>
                            
                            <div className="bg-white/40 p-6 rounded-2xl border border-white mb-6 flex-grow overflow-y-auto">
                                <div className="text-6xl mb-4 text-center">{data.icon}</div>
                                <p className="text-lg leading-loose whitespace-pre-wrap text-slate-700">{data.exp}</p>
                            </div>

                            <button 
                                onClick={onNext}
                                className="w-full bg-gradient-to-r from-sky-400 to-blue-400 hover:from-sky-500 hover:to-blue-500 text-white font-bold py-4 rounded-xl shadow-lg transition transform active:scale-95"
                            >
                                æ¬¡ã¸é€²ã‚€
                            </button>
                        </div>
                    )}
                </div>
            </div>
        );

        const ResultScreen = ({ score, total, onRetry }) => {
            let title = "";
            let msg = "";
            let badgeColor = "";

            if (score === total) {
                title = "ğŸŒˆ æ˜Ÿã¨ã‚«ãƒ¼ãƒ‰ã®èª¿å’Œè€…";
                msg = "ç´ æ™´ã‚‰ã—ã„ï¼ã‚ãªãŸã¯ã‚¿ãƒ­ãƒƒãƒˆã¨å æ˜Ÿè¡“ã®æ·±ã„ç¹‹ãŒã‚Šã‚’å®Œå…¨ã«ç†è§£ã—ã¦ã„ã¾ã™ã€‚ã‚ãªãŸã®ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¯ã€ã‚ˆã‚Šç«‹ä½“çš„ã§æ·±ã„ã‚‚ã®ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚";
                badgeColor = "text-purple-500";
            } else if (score >= total * 0.8) {
                title = "âœ¨ å¡æ™ºã®æ¢æ±‚è€…";
                msg = "ãŠè¦‹äº‹ã§ã™ï¼ã‚«ãƒ¼ãƒ‰ã®èƒŒå¾Œã«ã‚ã‚‹å¤©ä½“ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ã—ã£ã‹ã‚Šæ´ã‚“ã§ã„ã¾ã™ã€‚å®Ÿè·µã§ã‚‚ãœã²æ´»ã‹ã—ã¦ãã ã•ã„ã€‚";
                badgeColor = "text-pink-500";
            } else if (score >= total * 0.5) {
                title = "ğŸŒ± å­¦ã³ã®èŠ½ç”Ÿãˆ";
                msg = "åŠåˆ†ä»¥ä¸Šæ­£è§£ã—ã¾ã—ãŸï¼åŸºæœ¬ã¯ç†è§£ã§ãã¦ã„ã¾ã™ã€‚å¯¾å¿œè¡¨ã‚’è¦‹è¿”ã—ãªãŒã‚‰ã€ã•ã‚‰ã«çŸ¥è­˜ã‚’æ·±ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚";
                badgeColor = "text-sky-500";
            } else {
                title = "ğŸ“– å§‹ã¾ã‚Šã®æ—…äºº";
                msg = "æ–°ã—ã„çŸ¥è­˜ã¸ã®æ‰‰ãŒé–‹ã‹ã‚Œã¾ã—ãŸã€‚è§£èª¬ã‚’èª­ã¿è¿”ã™ã“ã¨ã§ã€ãã£ã¨å¤šãã®ç™ºè¦‹ãŒã‚ã‚‹ã¯ãšã§ã™ã€‚ç„¦ã‚‰ãšé€²ã¿ã¾ã—ã‚‡ã†ã€‚";
                badgeColor = "text-slate-500";
            }

            return (
                <div className="glass-panel p-10 rounded-3xl shadow-2xl text-center fade-in">
                    <h2 className="text-2xl font-bold mb-4 text-slate-500">æ—…ã®è¨˜éŒ²</h2>
                    <div className="text-7xl font-bold mb-6 text-slate-700 drop-shadow-sm">{score} <span className="text-2xl text-slate-400">/ {total}</span></div>
                    
                    <div className={`text-3xl font-bold mb-6 ${badgeColor}`}>{title}</div>
                    <p className="text-lg mb-10 leading-relaxed text-slate-600">{msg}</p>
                    
                    <button 
                        onClick={onRetry}
                        className="bg-white border-2 border-pink-300 text-pink-500 hover:bg-pink-50 hover:border-pink-400 font-bold py-3 px-8 rounded-full transition shadow-md hover:shadow-lg"
                    >
                        ã‚‚ã†ä¸€åº¦ æ—…ã«å‡ºã‚‹
                    </button>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>